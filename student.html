<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Page</title>

  <!-- Favicon & Touch Icon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="PHS-LOGO.png">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- тЬЕ рж╕рзЗрж╢ржи ржЪрзЗржХ -->
    <script>
    if (sessionStorage.getItem("studentLoggedIn") !== "true") {
      window.location.replace("/home.html");
      // console.log("Student not logged in. Redirecting to home.html."); // ржбрж┐ржмрж╛ржЧрж┐ржВ ржПрж░ ржЬржирзНржп
    } else {
      // console.log("Student logged in. Staying on student.html."); // ржбрж┐ржмрж╛ржЧрж┐ржВ ржПрж░ ржЬржирзНржп
    }
  </script>

</head>
  <body>
    
   <!--тЬЕ ржорзЗржи рж╣рзЗржбрж┐ржВ -->  
    <img src="PHS-LOGO.png" alt="School Logo" class="logo">
        <h1 class="school-name">PATHPUKUR HIGH SCHOOL (H.S.)</h1>


  <div class="section-heading-container">
        <h2 class="section-heading">
            <span class="emoji">ЁЯУв</span>
            <span class="blink">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐ржЬрзНржЮржкрзНрждрж┐</span>
      </h2>

  <!-- тЬЕ Scrolling Notice -->
  <div class="wrapper">
    <div class="marquee-container">
      <div id="marquee" class="marquee-content"></div>
    </div>
  </div>

  <!-- тЬЕ External Notice File -->
  <script src="student_notice.js"></script>
  <script>
  const marquee = document.getElementById("marquee");

  if (Array.isArray(studentNotices)) {
    studentNotices.forEach(notice => {
      const date = notice.date || "";  // ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржлрж╛ржБржХрж╛
      const text = notice.text || "";  // ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ ржлрж╛ржБржХрж╛

      // ржпржжрж┐ ржПржХрзЗржмрж╛рж░рзЗржЗ ржЦрж╛рж▓рж┐ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рзНржХрж┐ржк ржХрж░рзЗ ржжрж┐ржи
      if (text.trim() !== "") {
        const span = document.createElement("span");
        span.textContent = `${date} - ${text}`;
        span.style.color = notice.color || "black";
        span.style.fontWeight = "bold";
        span.style.marginRight = "30px";
        marquee.appendChild(span);
      }
    });
  } else {
    marquee.textContent = "ржХрзЛржирзЛ ржирзЛржЯрж┐рж╢ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред";
  }

  // ЁЯФБ Marquee pause on hover/touch
  marquee.addEventListener("mouseover", () => marquee.classList.add("paused"));
  marquee.addEventListener("mouseout", () => marquee.classList.remove("paused"));
  marquee.addEventListener("touchstart", () => marquee.classList.add("paused"));
  marquee.addEventListener("touchend", () => marquee.classList.remove("paused"));
</script>
  
  <!-- тЬЕ ржЯрзЗржмрж┐рж▓ ржирзЛржЯрж┐рж╢ ржмрзЛрж░рзНржб -->
  <div id="notice-board"></div>
  <div class="pagination">
    <button onclick="prevPage()" id="prevBtn">тПк Back</button>
    <span id="pageNumber">Page 1</span>
    <button onclick="nextPage()" id="nextBtn">тПй Next</button>
  </div>
 <!-- тЬЕ Popup Modal -->
<div id="popupModal" style="display: none;" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header"><strong id="popupTitle">ржмрж┐рж╖ржпрж╝</strong></div>
    <div class="modal-date"><strong>рждрж╛рж░рж┐ржЦ:</strong> <span id="popupDate">рждрж╛рж░рж┐ржЦ</span></div>
    <div class="modal-body" id="popupBody">ржорзВрж▓ ржмрж┐ржЬрзНржЮржкрзНрждрж┐</div>
    <div id="popupLinkArea" style="margin-top: 10px;"></div>
    <button id="closeModalBtn" onclick="closeModal()">тПк Back</button>
  </div>
</div>
  </div>

  <!-- тЬЕ External Notice Bord -->
  <script>
    const noticesPerPage = 10;
    let currentPage = 1;

    function renderNoticeTable() {
      const container = document.getElementById('notice-board');
      container.innerHTML = "";

      const start = (currentPage - 1) * noticesPerPage;
      const end = start + noticesPerPage;
      const paginatedNotices = studentTableNotices.slice(start, end);

      const table = document.createElement('table');
      table.id = 'notice-table';

      const thead = document.createElement('thead');
      thead.innerHTML = `
        <tr>
          <th>рждрж╛рж░рж┐ржЦ</th>
          <th>ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ</th>
          <th>ржмрж┐ржЬрзНржЮржкрзНрждрж┐</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement('tbody');
      paginatedNotices.forEach(notice => {
        const tr = document.createElement('tr');

        tr.innerHTML = `
          <td>${notice.date}</td>
          <td style="color: ${notice.color || '#000'};">${notice.text}</td>
<td>
  <button onclick="showPopup('${notice.text}', '${notice.date}', '${notice.link || ''}', '${notice.subj || ''}')" 
          onmouseover="this.style.opacity=0.8" 
          onmouseout="this.style.opacity=1">
    View
  </button>
</td>
        `;
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      container.appendChild(table);

      const totalPages = Math.ceil(studentTableNotices.length / noticesPerPage);
      document.getElementById('pageNumber').textContent = `Page ${currentPage} of ${totalPages}`;
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages;
    }

    function nextPage() {
      if (currentPage < Math.ceil(studentTableNotices.length / noticesPerPage)) {
        currentPage++;
        renderNoticeTable();
      }
    }

    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        renderNoticeTable();
      }
    }

    // ржкрзНрж░ржержоржмрж╛рж░ ржкрзЗржЬ рж▓рзЛржб рж╣рж▓рзЗ ржЯрзЗржмрж┐рж▓ рж░рзЗржирзНржбрж╛рж░ ржХрж░рзБржи
    renderNoticeTable();
  </script>

<script>
  window.onload = () => {
    loadStudentExamLinks();   // ржЖржЧрзЗрж░ ржкрж░рзАржХрзНрж╖рж╛рж░ рж░рзЗржЬрж╛рж▓рзНржЯ ржмрж╛ржЯржи рж▓рзЛржб
    renderNoticeTable();      // ржЯрзЗржмрж┐рж▓ ржирзЛржЯрж┐рж╢ рж▓рзЛржб
  };
</script>
  
  <script> // Student Table Notice popup handle
  function showPopup(titleText, date, link, subjText) {
  // ржкржк-ржЖржк ржХржиржЯрзЗржЗржирж╛рж░ рждрзИрж░рж┐
  const popup = document.createElement('div');
  popup.style.position = 'fixed';
  popup.style.top = '50%';
  popup.style.left = '50%';
  popup.style.transform = 'translate(-50%, -50%)';
  popup.style.background = '#f0f8ff'; // рж╣рж╛рж▓ржХрж╛ ржирзАрж▓
  popup.style.padding = '20px';
  popup.style.margin = '0 auto';      // рж╕рзЗржирзНржЯрж╛рж░рзЗ рж░рж╛ржЦржмрзЗ
  popup.style.border = '2px solid #333';
  popup.style.borderRadius = '10px';
  popup.style.boxShadow = '0 0 10px rgba(0,0,0,0.5)';
  popup.style.zIndex = '9999';
  popup.style.textAlign = 'center';
  popup.style.maxWidth = '90%'; // рж╕рзНржХрзНрж░рж┐ржирзЗ overflow ржирж╛ рж╣рзЯ
  popup.style.minWidth = '240px'; // ржЦрзБржм ржЫрзЛржЯ ржирж╛ рж╣рзЯ
  popup.style.width = '300px'; // рж╕рж░рзНржмрзЛржЪрзНржЪ ржЪржУрзЬрж╛
  popup.style.fontFamily = 'Arial, sans-serif';

  // рж╣рзЗржбрж┐ржВ (Text) тАФ ржмрзЬрзЛ, рж╕рж╛ржжрж╛, рж╕ржмрзБржЬ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб
  const titleElem = document.createElement('div');
  titleElem.innerText = titleText;
  titleElem.style.backgroundColor = 'green';
  titleElem.style.color = 'white';
  titleElem.style.fontWeight = 'bold';
  titleElem.style.fontSize = '15px';
  titleElem.style.padding = '10px';
  titleElem.style.borderRadius = '5px';
  titleElem.style.marginBottom = '15px';
  popup.appendChild(titleElem);

  // рждрж╛рж░рж┐ржЦ (Date)
  const dateElem = document.createElement('div');
  dateElem.innerHTML = `<strong>рждрж╛рж░рж┐ржЦ:</strong> ${date}`;
  dateElem.style.marginBottom = '10px';
  popup.appendChild(dateElem);

  // subj ржерж╛ржХрж▓рзЗ рждрж╛ ржжрзЗржЦрж╛ржУ тАФ ржЧрж╛рзЭ рж╕ржмрзБржЬ рж░ржЩ, рж╣рж╛рж▓ржХрж╛ рж╕ржмрзБржЬ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб, ржЫрзЛржЯ рж╣рж░ржлрзЗ
  if (subjText && subjText.trim() !== '') {
    const subjElem = document.createElement('div');
    subjElem.innerText = subjText;
    subjElem.style.color = 'darkgreen';
    subjElem.style.backgroundColor = '#e6ffe6'; // рж╣рж╛рж▓ржХрж╛ рж╕ржмрзБржЬ
    subjElem.style.fontWeight = 'bold';
    subjElem.style.fontSize = '14px';
    subjElem.style.padding = '6px';
    subjElem.style.borderRadius = '4px';
    subjElem.style.marginBottom = '12px';
    popup.appendChild(subjElem);
  }
// ржмрзЛрждрж╛ржо ржХржирзНржЯрзЗржЗржирж╛рж░
const buttonContainer = document.createElement('div');
buttonContainer.style.marginTop = '20px';
buttonContainer.style.display = 'flex';
buttonContainer.style.flexWrap = 'wrap';
buttonContainer.style.justifyContent = 'center';
buttonContainer.style.gap = '10px'; // ржмрзЛрждрж╛ржорзЗрж░ ржорж╛ржЭрзЗ ржжрзВрж░рждрзНржм

// ржлрж╛ржЗрж▓ ржЦрзБрж▓рзБржи ржмрзЛрждрж╛ржо рж▓рж┐ржЩрзНржХ ржерж╛ржХрж▓рзЗ рждрж╛ ржжрзЗржЦрж╛ржУ
if (link && link.trim() !== '') {
  const linkBtn = document.createElement('a');
  linkBtn.href = link;
  linkBtn.innerText = 'Open Link';
  linkBtn.target = '_blank';
  linkBtn.style.backgroundColor = '#007bff';
  linkBtn.style.color = 'white';
  linkBtn.style.padding = '6px 10px';
  linkBtn.style.border = 'none';
  linkBtn.style.borderRadius = '5px';
  linkBtn.style.textDecoration = 'none';
  linkBtn.style.fontWeight = 'bold';
  linkBtn.style.fontSize = '12px'; // ржЫрзЛржЯ ржлржирзНржЯ
  linkBtn.style.transition = 'background-color 0.3s';
  linkBtn.onmouseover = () => linkBtn.style.backgroundColor = '#0056b3';
  linkBtn.onmouseout = () => linkBtn.style.backgroundColor = '#007bff';
  buttonContainer.appendChild(linkBtn);
}

// тЬЕ PNG Download Button (fixed)
    const downloadBtn = document.createElement('button');
    downloadBtn.innerText = 'Download';
    downloadBtn.style.backgroundColor = '#28a745';
    downloadBtn.style.color = 'white';
    downloadBtn.style.padding = '6px 10px';
    downloadBtn.style.border = 'none';
    downloadBtn.style.borderRadius = '5px';
    downloadBtn.style.fontWeight = 'bold';
    downloadBtn.style.fontSize = '12px'; // ржЫрзЛржЯ ржлржирзНржЯ
    downloadBtn.style.cursor = 'pointer';
    downloadBtn.onclick = () => {
        // Ensure reflow before capturing
        setTimeout(() => {
            html2canvas(popup).then(canvas => {
                const image = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = image;
                link.download = 'notice.png';
                link.click();
            });
        }, 100); // slight delay for reflow
    };
    buttonContainer.appendChild(downloadBtn);
    
// ржмржирзНржз ржХрж░рзБржи ржмрзЛрждрж╛ржо
const closeBtn = document.createElement('button');
closeBtn.innerText = 'Back';
closeBtn.style.backgroundColor = '#dc3545';
closeBtn.style.color = 'white';
closeBtn.style.padding = '6px 10px';
closeBtn.style.border = 'none';
closeBtn.style.borderRadius = '5px';
closeBtn.style.fontWeight = 'bold';
closeBtn.style.fontSize = '12px'; // ржЫрзЛржЯ ржлржирзНржЯ
closeBtn.style.cursor = 'pointer';
closeBtn.style.transition = 'background-color 0.3s';
closeBtn.onmouseover = () => closeBtn.style.backgroundColor = '#a71d2a';
closeBtn.onmouseout = () => closeBtn.style.backgroundColor = '#dc3545';
closeBtn.onclick = () => document.body.removeChild(popup);
buttonContainer.appendChild(closeBtn);

// ржкржкржЖржкрзЗ ржмрзЛрждрж╛ржо ржХржирзНржЯрзЗржЗржирж╛рж░ ржпрзЛржЧ ржХрж░рзБржи
popup.appendChild(buttonContainer);

  // рж╕рзНржХрзНрж░рж┐ржирзЗ ржжрзЗржЦрж╛ржУ
  document.body.appendChild(popup);
}

function closeModal() {
  document.getElementById('popupModal').style.display = 'none';
}

  </script>

     <!-- тЬЕ ржкрж░рзАржХрзНрж╖рж╛рж░ ржлрж▓рж╛ржлрж▓ HTML -->
  <div class="section-heading-container">
    <h2 class="section-heading">
        <span class="emoji">ЁЯУД</span>
        <span class="blink">ржкрж░рзАржХрзНрж╖рж╛рж░ ржлрж▓рж╛ржлрж▓</span>
    </h2>
    <h3 class="login-instruction-heading"> рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАржжрзЗрж░ рж▓рж┐ржЦрж┐ржд ржкрж░рзАржХрзНрж╖рж╛рж░ ржиржорзНржмрж░ ржжрзЗржЦрждрзЗ ржирж┐ржЪрзЗрж░ ржмрзЛрждрж╛ржоржЯрж┐рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи: <span class="emoji">ЁЯСЗ</span></h3>
    <a href="https://script.google.com/macros/s/AKfycbw-HfsUTXB1RahrikT90rp1g3qDanQkXxhhgcCAETLHdEYoAhWa537WGABX3rFz9stGPQ/exec" target="_blank" class="exam-link">рж▓рж┐ржЦрж┐ржд ржкрж░рзАржХрзНрж╖рж╛рж░ ржиржорзНржмрж░ ржжрзЗржЦрзБржи</a>
    </div>

      <!-- тЬЕ рж╕рзНржЯрзБржбрзЗржирзНржЯ рж░рзБржЯрж┐ржи -->
    <div class="section-heading-container">
   <h2 class="section-heading">
            <span class="emoji">ЁЯПл</span>
            <span class="blink">ржмрж┐ржжрзНржпрж╛рж▓рзЯрзЗрж░ рж╕ржоржпрж╝рж╕рзВржЪрзА (рж░рзБржЯрж┐ржи)</span>
        </h2>
    <h3 class="login-instruction-heading">ржЫрж╛рждрзНрж░-ржЫрж╛рждрзНрж░рзАрж░ ржХрзНрж▓рж╛рж╕ рж░рзБржЯрж┐ржи ржжрзЗржЦрждрзЗ ржирж┐ржЪрзЗрж░ ржмрзЛрждрж╛ржоржЯрж┐рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:<span class="emoji">ЁЯСЗ</span></h3>
    <a href="https://script.google.com/macros/s/AKfycbxAPcHNUgxmXlgnLjxqiO_QYr5VfVbXEfUjHEIHqih8q2lA7IkgZUtPwrAxGkTf-IxVtQ/exec?page=student" target="_blank" class="exam-link">ржХрзНрж▓рж╛рж╕ рж░рзБржЯрж┐ржи ржжрзЗржЦрзБржи</a>
    </div>

      <!-- тЬЕ ржЖржирзНржд: ржмрж┐ржжрзНржпрж╛рж▓ржпрж╝ ржкрж░рзАржХрзНрж╖рж╛рж░ рж░рзБржЯрж┐ржи -->
      <div class="section-heading-container">
        <h2 class="section-heading">
            <span class="emoji">ЁЯПл</span>
            <span class="blink">ржмрж┐ржжрзНржпрж╛рж▓ржпрж╝ ржкрж░рзАржХрзНрж╖рж╛рж░ рж░рзБржЯрж┐ржи</span>
        </h2>
      <h3 class="login-instruction-heading">ржмрж┐ржжрзНржпрж╛рж▓рзЯрзЗрж░ ржкрж░рзАржХрзНрж╖рж╛рж░ рж░рзБржЯрж┐ржи ржжрзЗржЦрждрзЗ ржирж┐ржЪрзЗрж░ ржмрзЛрждрж╛ржоржЯрж┐рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:<span class="emoji">ЁЯСЗ</span></h3>
      <a href="https://script.google.com/macros/s/AKfycbykz5KNLXrqC4F_osm1EHD_Db1OUAjOiD-yeONI6WI6_CqYOBCimhWHUl0Wc1AmXXQ/exec" target="_blank" class="exam-link">ржкрж░рзАржХрзНрж╖рж╛рж░ рж░рзБржЯрж┐ржи ржжрзЗржЦрзБржи</a>
      </div>
      
    
  <!-- Footer -->
  <footer>
    <p>The Website is Developed under the Instruction of the Headmaster.</p>
    <p>┬й Pathpukur High School (HS). All rights reserved.</p>
</footer>
  <!-- Main JS -->
  <script src="script.js"></script>
</body>
</html>
