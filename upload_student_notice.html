<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Notice Admin Panel</title>
    <link rel="stylesheet" href="style.css">
<style>
    input, textarea, select { display: block; margin-bottom: 10px; width: 300px; }
    table, th, td { border: 1px solid #000; border-collapse: collapse; padding: 5px; }
  </style>
</head>
<body>
<img src="PHS-LOGO.png" alt="School Logo" class="logo">
    <h1>PATHPUKUR HIGH SCHOOL (HS)</h1>
    <h1>üñäÔ∏è Upload Student Notice üñäÔ∏è</h1>
  <form id="noticeForm">
  <input type="date" name="date" required />
  <input type="text" name="subject" placeholder="Subject" required />
  <textarea name="body" placeholder="Notice Body"></textarea>
  <input type="color" name="color" />
  <input type="file" name="file" required />
  <button type="submit">Upload Notice</button>
</form>

<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbxz97uDFqeAcnCCUQ2nR-s8gOxOFuiRyKBQ0ezK6MtWCFkvF4k6LDHv6WImicE3aUo/exec';

document.getElementById('noticeForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const form = e.target;
  const file = form.file.files[0];
  const reader = new FileReader();

  reader.onload = async () => {
    const base64 = reader.result.split(',')[1];
    const data = {
      date: form.date.value,
      subject: form.subject.value,
      body: form.body.value,
      color: form.color.value,
      fileName: file.name,
      mimeType: file.type,
      fileContent: base64
    };

    try {
      const res = await fetch(scriptURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (res.ok) {
        alert(await res.text());
        form.reset();  // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®
      } else {
        alert('Upload failed: ' + res.statusText);
      }
    } catch (error) {
      alert('Error: ' + error.message);
    }
  };

  reader.readAsDataURL(file);
});
</script>

</body>
</html>
